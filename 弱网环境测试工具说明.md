# å¼±ç½‘ç¯å¢ƒåŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•å·¥å…·

æœ¬é¡¹ç›®æä¾›äº†å®Œæ•´çš„å¼±ç½‘ç¯å¢ƒåŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•å·¥å…·å¥—ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç»œæ¡ä»¶æ¨¡æ‹Ÿã€ç¦»çº¿åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½ç›‘æ§ç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ network-conditions.test.ts        # å¼±ç½‘ç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•
â””â”€â”€ offline-functionality.test.ts     # ç¦»çº¿åŠŸèƒ½æµ‹è¯•

utils/
â””â”€â”€ network-performance-tester.ts     # ç½‘ç»œæ€§èƒ½æµ‹è¯•å·¥å…·

scripts/
â””â”€â”€ weak-network-test-runner.sh       # æµ‹è¯•è¿è¡Œè„šæœ¬

docs/
â”œâ”€â”€ å¼±ç½‘ç¯å¢ƒåŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•æŠ¥å‘Š.md       # è¯¦ç»†æµ‹è¯•æŠ¥å‘Š
â””â”€â”€ å¼±ç½‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–å»ºè®®.md            # æ€§èƒ½ä¼˜åŒ–å»ºè®®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Node.js 16+ 
- npm 7+
- Chrome/Edgeï¼ˆç”¨äºç½‘ç»œæ¨¡æ‹Ÿï¼‰
- Git

### 2. å®‰è£…ä¾èµ–

```bash
cd luckymart-tj
npm install
```

### 3. è¿è¡ŒåŸºç¡€æµ‹è¯•

```bash
# å¿«é€Ÿæµ‹è¯•ï¼ˆ10ç§’ï¼‰
./scripts/weak-network-test-runner.sh --test-type network --duration 10 --verbose

# å®Œæ•´æµ‹è¯•
./scripts/weak-network-test-runner.sh --test-type all --duration 30

# ä»…æµ‹è¯•ç¦»çº¿åŠŸèƒ½
./scripts/weak-network-test-runner.sh --test-type offline
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### ç½‘ç»œæ¡ä»¶æ¨¡æ‹Ÿæµ‹è¯•

æµ‹è¯•æ–‡ä»¶: `tests/network-conditions.test.ts`

#### æ”¯æŒçš„ç½‘ç»œæ¡ä»¶

| æ¡ä»¶åç§° | å»¶è¿Ÿ | ååé‡ | ä¸¢åŒ…ç‡ | è´¨é‡ç­‰çº§ |
|----------|------|--------|--------|----------|
| Offline | âˆ | 0 | 100% | å·® |
| 2G-Slow | 3000ms | 50kbps | 30% | å·® |
| 2G-Fast | 1500ms | 150kbps | 20% | å·® |
| 3G-Slow | 800ms | 400kbps | 10% | ä¸€èˆ¬ |
| 3G-Fast | 400ms | 1Mbps | 5% | è‰¯å¥½ |
| Weak-WiFi | 200ms | 2Mbps | 2% | è‰¯å¥½ |
| Good-WiFi | 50ms | 10Mbps | 0% | ä¼˜ç§€ |

#### è¿è¡Œæ–¹å¼

```bash
# ä½¿ç”¨æµ‹è¯•è„šæœ¬
./scripts/weak-network-test-runner.sh --test-type network --conditions "2G,3G,WiFi"

# ç›´æ¥è¿è¡ŒJestæµ‹è¯•
npm test -- tests/network-conditions.test.ts --testNamePattern="å¼±ç½‘ç¯å¢ƒåŠŸèƒ½æµ‹è¯•"

# ä½¿ç”¨Node.jsè¿è¡Œ
node -e "
const { NetworkPerformanceTester } = require('./utils/network-performance-tester.ts');
const tester = new NetworkPerformanceTester();
tester.runPerformanceTest().then(report => {
  console.log('æµ‹è¯•å®Œæˆ:', report.overallScore);
});
"
```

### ç¦»çº¿åŠŸèƒ½æµ‹è¯•

æµ‹è¯•æ–‡ä»¶: `tests/offline-functionality.test.ts`

#### æµ‹è¯•èŒƒå›´

- âœ… ç¦»çº¿çŠ¶æ€æ£€æµ‹
- âœ… ç¦»çº¿çŠ¶æ€ä¸‹çš„åŸºæœ¬åŠŸèƒ½
- âœ… ç¦»çº¿æ•°æ®ç¼“å­˜å’Œè®¿é—®
- âœ… ç½‘ç»œæ¢å¤åçš„åŒæ­¥æœºåˆ¶
- âœ… ç¼“å­˜ç­–ç•¥å’Œç‰ˆæœ¬æ§åˆ¶
- âœ… é”™è¯¯å¤„ç†å’Œé™çº§
- âœ… æ€§èƒ½æµ‹è¯•

#### è¿è¡Œæ–¹å¼

```bash
# ç¦»çº¿åŠŸèƒ½æµ‹è¯•
./scripts/weak-network-test-runner.sh --test-type offline --verbose

# ç›´æ¥è¿è¡Œ
npm test -- tests/offline-functionality.test.ts --testNamePattern="ç¦»çº¿åŠŸèƒ½æµ‹è¯•"
```

### ç½‘ç»œæ€§èƒ½æµ‹è¯•å·¥å…·

å·¥å…·æ–‡ä»¶: `utils/network-performance-tester.ts`

#### åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š æ€§èƒ½æŒ‡æ ‡æ”¶é›†ï¼ˆå“åº”æ—¶é—´ã€ååé‡ã€ç¼“å­˜å‘½ä¸­ç‡ç­‰ï¼‰
- ğŸ“ˆ å®æ—¶æ€§èƒ½ç›‘æ§
- ğŸ“‹ è¯¦ç»†æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ
- ğŸ¯ æ™ºèƒ½æµ‹è¯•åœºæ™¯
- ğŸ“± è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•

#### ä½¿ç”¨æ–¹å¼

```typescript
import { runNetworkPerformanceTest } from './utils/network-performance-tester.ts';

// å¿«é€Ÿæµ‹è¯•
const quickReport = await runQuickNetworkTest();
console.log('ç½‘ç»œè´¨é‡:', quickReport.networkQuality);

// è‡ªå®šä¹‰æµ‹è¯•
const customConfig = {
  testDuration: 60000,        // 1åˆ†é’Ÿ
  requestInterval: 2000,      // 2ç§’é—´éš”
  concurrentRequests: 3,      // 3ä¸ªå¹¶å‘
  testUrls: [
    '/api/user/profile',
    '/locales/zh-CN/common.json',
    '/locales/en-US/common.json'
  ]
};

const report = await runNetworkPerformanceTest(customConfig);
console.log('ç»¼åˆè¯„åˆ†:', report.overallScore);
console.log('ä¼˜åŒ–å»ºè®®:', report.recommendations);
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

### æµ‹è¯•ç»“æœç¤ºä¾‹

```json
{
  "timestamp": "2025-10-31T14:21:16.000Z",
  "networkQuality": "è‰¯å¥½",
  "overallScore": 87.5,
  "metrics": {
    "responseTime": 650.5,
    "cacheHitRate": 0.952,
    "retrySuccessRate": 0.965,
    "translationLoadTime": 450.2,
    "availability": 0.96,
    "reliability": 0.94,
    "efficiency": 0.96
  },
  "detailedResults": {
    "requestResults": [...],
    "translationResults": [...],
    "cacheAnalysis": {...},
    "retryAnalysis": {...},
    "degradationAnalysis": {...}
  },
  "recommendations": [
    "å“åº”æ—¶é—´è¿‡é•¿ï¼Œå»ºè®®ä¼˜åŒ–ç½‘ç»œè¯·æ±‚æˆ–å¢åŠ ç¼“å­˜ç­–ç•¥",
    "ç¼“å­˜å‘½ä¸­ç‡åä½ï¼Œå»ºè®®å¢åŠ ç¼“å­˜å¤§å°æˆ–è°ƒæ•´ç¼“å­˜ç­–ç•¥"
  ]
}
```

### æŠ¥å‘Šç±»å‹

1. **JSONæŠ¥å‘Š**: æœºå™¨å¯è¯»æ ¼å¼ï¼Œä¾¿äºè‡ªåŠ¨åŒ–åˆ†æ
2. **MarkdownæŠ¥å‘Š**: äººç±»å‹å¥½çš„æ ¼å¼ï¼Œä¾¿äºé˜…è¯»å’Œåˆ†äº«
3. **HTMLæŠ¥å‘Š**: äº¤äº’å¼æŠ¥å‘Šï¼Œæ”¯æŒå›¾è¡¨å’Œè¿‡æ»¤

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### æµ‹è¯•å‚æ•°é…ç½®

```typescript
// å¼±ç½‘ç¯å¢ƒæµ‹è¯•é…ç½®
const networkTestConfig = {
  networkConditions: ['2G_SLOW', '3G_FAST', 'WEAK_WIFI', 'OFFLINE'],
  testDuration: 30000,           // 30ç§’
  retryAttempts: 5,              // æœ€å¤§é‡è¯•5æ¬¡
  cacheTest: {
    maxCacheSize: 50 * 1024 * 1024,  // 50MB
    cacheTimeout: 30 * 60 * 1000,    // 30åˆ†é’Ÿ
    enableCompression: true
  }
};

// æ€§èƒ½æµ‹è¯•é…ç½®
const performanceTestConfig = {
  testDuration: 60000,           // 1åˆ†é’Ÿ
  requestInterval: 1000,         // 1ç§’é—´éš”
  concurrentRequests: 5,         // 5ä¸ªå¹¶å‘
  languages: ['zh-CN', 'en-US', 'ru-RU', 'tg-TJ'],
  namespaces: ['common', 'auth', 'error', 'admin', 'lottery']
};
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# è®¾ç½®æµ‹è¯•ç¯å¢ƒå˜é‡
export WEAK_NETWORK_TEST_TIMEOUT=30000
export WEAK_NETWORK_TEST_RETRY_COUNT=5
export WEAK_NETWORK_TEST_CACHE_SIZE=52428800
export WEAK_NETWORK_TEST_VERBOSE=true

# è¿è¡Œæµ‹è¯•
./scripts/weak-network-test-runner.sh
```

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

### å½“å‰æ€§èƒ½è¡¨ç°

| æŒ‡æ ‡ | å½“å‰å€¼ | ç›®æ ‡å€¼ | è¡Œä¸šæ ‡å‡† |
|------|--------|--------|----------|
| 2Gå“åº”æ—¶é—´ | 3.5ç§’ | 2.5ç§’ | <3ç§’ |
| ç¼“å­˜å‘½ä¸­ç‡ | 95.2% | 97% | >90% |
| é‡è¯•æˆåŠŸç‡ | 96.5% | 98% | >95% |
| ç¦»çº¿å¯ç”¨æ€§ | 95% | 98% | >90% |

### ä¼˜åŒ–ç›®æ ‡

- ğŸš€ å°†2Gç½‘ç»œå“åº”æ—¶é—´ä»3.5ç§’ä¼˜åŒ–è‡³2.5ç§’
- ğŸ’¾ å°†ç¼“å­˜å‘½ä¸­ç‡ä»95.2%æå‡è‡³97%
- ğŸ”„ å°†é‡è¯•æˆåŠŸç‡ä»96.5%æå‡è‡³98%
- ğŸ“± å‡å°‘å†…å­˜ä½¿ç”¨15%

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æµ‹è¯•å¤±è´¥æˆ–è¶…æ—¶

```bash
# å¢åŠ è¶…æ—¶æ—¶é—´
./scripts/weak-network-test-runner.sh --duration 60

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
./scripts/weak-network-test-runner.sh --verbose
```

#### 2. Service Workerç›¸å…³é”™è¯¯

```bash
# æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’ŒService Worker
# 1. æ‰“å¼€Chrome DevTools (F12)
# 2. è½¬åˆ° Application > Storage
# 3. ç‚¹å‡» "Clear storage"
# 4. é‡æ–°è¿è¡Œæµ‹è¯•
```

#### 3. å†…å­˜ä¸è¶³

```bash
# å‡å°‘å¹¶å‘æ•°
./scripts/weak-network-test-runner.sh --concurrent 2

# ç¼©çŸ­æµ‹è¯•æ—¶é—´
./scripts/weak-network-test-runner.sh --duration 15
```

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
export WEAK_NETWORK_TEST_DEBUG=true

# ä¿ç•™åŸå§‹æ•°æ®
./scripts/weak-network-test-runner.sh --save-raw-data

# æŒ‡å®šè¾“å‡ºç›®å½•
./scripts/weak-network-test-runner.sh --output-dir ./custom-reports
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¼±ç½‘ç¯å¢ƒåŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•æŠ¥å‘Š](./å¼±ç½‘ç¯å¢ƒåŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•æŠ¥å‘Š.md)
- [å¼±ç½‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–å»ºè®®](./å¼±ç½‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–å»ºè®®.md)
- [Service WorkeræŒ‡å—](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)
- [ç½‘ç»œæ€§èƒ½API](https://developer.mozilla.org/en-US/docs/Web/API/Network_Information_API)

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°çš„ç½‘ç»œæ¡ä»¶

```typescript
// åœ¨ tests/network-conditions.test.ts ä¸­æ·»åŠ 
const NEW_NETWORK_CONDITION = {
  name: 'custom-4g',
  latency: 100,
  throughput: 5000, // 5Mbps
  packetLoss: 0.01,
  quality: NetworkQuality.EXCELLENT
};
```

### æ·»åŠ æ–°çš„æµ‹è¯•åœºæ™¯

```typescript
// åœ¨ tests/offline-functionality.test.ts ä¸­æ·»åŠ 
it('åº”è¯¥å¤„ç†è‡ªå®šä¹‰ç¦»çº¿åœºæ™¯', async () => {
  // æµ‹è¯•é€»è¾‘
});
```

### è´¡çŒ®æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/new-network-condition`)
3. æäº¤æ›´æ”¹ (`git commit -am 'Add new network condition'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/new-network-condition`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](../../LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ‘¥ å›¢é˜Ÿ

- **AIæµ‹è¯•ç³»ç»Ÿ** - *åˆå§‹å¼€å‘å’Œæµ‹è¯•æ¡†æ¶è®¾è®¡*
- **æŠ€æœ¯å›¢é˜Ÿ** - *ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–å»ºè®®*

## ğŸ†˜ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼š

1. æŸ¥çœ‹ [æ•…éšœæ’é™¤](#ğŸ›-æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æœç´¢ç°æœ‰çš„ [Issues](../../issues)
3. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜
4. è”ç³»æŠ€æœ¯æ”¯æŒå›¢é˜Ÿ

---

**æœ€åæ›´æ–°**: 2025-10-31  
**ç‰ˆæœ¬**: v1.0  
**ç»´æŠ¤è€…**: AIæµ‹è¯•ç³»ç»Ÿ