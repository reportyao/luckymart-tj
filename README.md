# LuckyMart-TJ ä¹äº«å•†åŸ

![Version](https://img.shields.io/badge/version-0.1.0-blue.svg)
![Next.js](https://img.shields.io/badge/Next.js-14.2.33-black.svg)
![TypeScript](https://img.shields.io/badge/TypeScript-5.6.2-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

## ğŸ“– é¡¹ç›®ç®€ä»‹

LuckyMart-TJ ä¹äº«å•†åŸæ˜¯ä¸€ä¸ªåŸºäºNext.jså’ŒSupabaseæ„å»ºçš„ç°ä»£åŒ–ç”µå•†å¹³å°ï¼Œé›†æˆäº†å¤šå±‚çº§è£‚å˜æ¨èç³»ç»Ÿã€é˜²æ¬ºè¯ˆç³»ç»Ÿã€Telegramæœºå™¨äººæœåŠ¡å’Œæ™ºèƒ½ç¼“å­˜ä¼˜åŒ–ç­‰åŠŸèƒ½ã€‚è¯¥ç³»ç»Ÿä¸“ä¸ºç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œæä¾›å®Œæ•´çš„è´­ç‰©ã€æ¨èã€å¥–åŠ±å’Œè¥é”€è§£å†³æ–¹æ¡ˆã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **ğŸ›’ å®Œæ•´ç”µå•†åŠŸèƒ½**: äº§å“å±•ç¤ºã€è®¢å•ç®¡ç†ã€æ”¯ä»˜å¤„ç†ã€åº“å­˜ç®¡ç†
- **ğŸ‘¥ å¤šå±‚çº§è£‚å˜ç³»ç»Ÿ**: æ— é™å±‚çº§æ¨èå¥–åŠ±ï¼Œæ™ºèƒ½é˜²æ¬ºè¯ˆæ£€æµ‹
- **ğŸ¤– Telegramæœºå™¨äºº**: è‡ªåŠ¨å®¢æœã€å¥–åŠ±é€šçŸ¥ã€ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- **ğŸ›¡ï¸ é˜²æ¬ºè¯ˆç³»ç»Ÿ**: å®æ—¶è¡Œä¸ºç›‘æ§ï¼Œé»‘åå•ç®¡ç†ï¼Œé£é™©è¯„ä¼°
- **âš¡ é«˜æ€§èƒ½ä¼˜åŒ–**: Redisç¼“å­˜ã€æ•°æ®åº“ä¼˜åŒ–ã€N+1æŸ¥è¯¢æ£€æµ‹
- **ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–**: å“åº”å¼è®¾è®¡ï¼ŒPWAæ”¯æŒï¼Œæµç•…ç”¨æˆ·ä½“éªŒ
- **ğŸ” å®‰å…¨è®¤è¯**: JWTè®¤è¯ã€æƒé™ç®¡ç†ã€APIå®‰å…¨é˜²æŠ¤

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20.14.15
- npm >= 9.0.0
- Redis >= 6.0
- PostgreSQL >= 13

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone <repository-url>
cd luckymart-tj
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼š
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL="postgresql://username:password@localhost:5432/luckymart"

# Supabaseé…ç½®
NEXT_PUBLIC_SUPABASE_URL="your-supabase-url"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-supabase-anon-key"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# Redisé…ç½®
REDIS_URL="redis://localhost:6379"

# JWTå¯†é’¥
JWT_SECRET="your-jwt-secret"

# Telegram Boté…ç½®
TELEGRAM_BOT_TOKEN="your-bot-token"
TELEGRAM_WEBHOOK_URL="your-webhook-url"

# Instagram APIé…ç½®
INSTAGRAM_CLIENT_ID="your-instagram-client-id"
INSTAGRAM_CLIENT_SECRET="your-instagram-client-secret"
```

4. **æ•°æ®åº“è¿ç§»**
```bash
npm run prisma:migrate
npm run prisma:generate
```

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

è®¿é—® [http://localhost:3000](http://localhost:3000) æŸ¥çœ‹åº”ç”¨ã€‚

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§è¯¦è§£

### ğŸ›’ ç”µå•†ç³»ç»Ÿ
- **äº§å“ç®¡ç†**: å•†å“å±•ç¤ºã€åˆ†ç±»ç®¡ç†ã€åº“å­˜æ§åˆ¶
- **è®¢å•å¤„ç†**: è´­ç‰©è½¦ã€è®¢å•æµç¨‹ã€æ”¯ä»˜é›†æˆ
- **ç”¨æˆ·ç®¡ç†**: æ³¨å†Œç™»å½•ã€ä¸ªäººèµ„æ–™ã€åœ°å€ç®¡ç†
- **äº¤æ˜“è®°å½•**: å……å€¼æç°ã€äº¤æ˜“å†å²ã€è´¢åŠ¡æŠ¥è¡¨

### ğŸ‘¥ æ¨èå¥–åŠ±ç³»ç»Ÿ
- **å¤šå±‚çº§è£‚å˜**: æ”¯æŒæ— é™å±‚çº§æ¨èå…³ç³»
- **å¥–åŠ±æœºåˆ¶**: æ¨èå¥–åŠ±ã€å›¢é˜Ÿå¥–åŠ±ã€å‡çº§å¥–åŠ±
- **é˜²ä½œå¼Šæ£€æµ‹**: è¡Œä¸ºåˆ†æã€å¼‚å¸¸æ£€æµ‹ã€é£é™©æ§åˆ¶
- **å®æ—¶ç»“ç®—**: å³æ—¶å¥–åŠ±è®¡ç®—ã€è‡ªåŠ¨å‘æ”¾

### ğŸ¤– Telegramæœºå™¨äºº
- **è‡ªåŠ¨å®¢æœ**: 24/7åœ¨çº¿å®¢æœæ”¯æŒ
- **å¥–åŠ±é€šçŸ¥**: å®æ—¶æ¨é€å¥–åŠ±åˆ°è´¦æ¶ˆæ¯
- **ç”¨æˆ·æœåŠ¡**: æŸ¥è¯¢ä½™é¢ã€æ¨èç ã€å›¢é˜Ÿä¿¡æ¯
- **å®¹é”™æœºåˆ¶**: å¤šé‡ä¿éšœï¼Œç¡®ä¿æœåŠ¡ç¨³å®š

### ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤
- **é˜²æ¬ºè¯ˆç³»ç»Ÿ**: å®æ—¶ç›‘æ§ã€æ™ºèƒ½è¯†åˆ«ã€é£é™©é¢„è­¦
- **æƒé™ç®¡ç†**: ç»†ç²’åº¦æƒé™æ§åˆ¶ã€è§’è‰²åˆ†é…
- **æ•°æ®å®‰å…¨**: åŠ å¯†ä¼ è¾“ã€æ•æ„Ÿæ•°æ®è„±æ•
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´æ“ä½œè®°å½•ã€å¼‚å¸¸è¿½è¸ª

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **æ™ºèƒ½ç¼“å­˜**: Rediså¤šå±‚ç¼“å­˜ç­–ç•¥
- **æ•°æ®åº“ä¼˜åŒ–**: æŸ¥è¯¢ä¼˜åŒ–ã€ç´¢å¼•ä¼˜åŒ–ã€è¿æ¥æ± 
- **å‰ç«¯ä¼˜åŒ–**: ä»£ç åˆ†å‰²ã€èµ„æºå‹ç¼©ã€æ‡’åŠ è½½
- **ç›‘æ§å‘Šè­¦**: æ€§èƒ½ç›‘æ§ã€é”™è¯¯è¿½è¸ªã€è‡ªåŠ¨æŠ¥è­¦

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
luckymart-tj/
â”œâ”€â”€ app/                    # Next.js åº”ç”¨é¡µé¢
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†åå°
â”‚   â”œâ”€â”€ referral/          # æ¨èç³»ç»Ÿ
â”‚   â”œâ”€â”€ product/           # äº§å“é¡µé¢
â”‚   â””â”€â”€ ...
â”œâ”€â”€ bot/                   # Telegramæœºå™¨äºº
â”‚   â”œâ”€â”€ handlers/          # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ lib/                   # æ ¸å¿ƒåº“
â”‚   â”œâ”€â”€ anti-fraud/        # é˜²æ¬ºè¯ˆç³»ç»Ÿ
â”‚   â”œâ”€â”€ cache-manager.ts   # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ database-lock.ts   # æ•°æ®åº“é”
â”‚   â””â”€â”€ ...
â”œâ”€â”€ prisma/               # æ•°æ®åº“æ¨¡å‹
â”‚   â””â”€â”€ schema.prisma     # æ•°æ®åº“æ¶æ„
â”œâ”€â”€ docs/                 # æ–‡æ¡£ç›®å½•
â””â”€â”€ __tests__/            # æµ‹è¯•æ–‡ä»¶
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- [ğŸ“– ç”¨æˆ·æŒ‡å—](docs/user-guide.md) - å¦‚ä½•ä½¿ç”¨ç³»ç»Ÿ
- [ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜æŒ‡å—](docs/admin-guide.md) - ç®¡ç†åå°ä½¿ç”¨
- [ğŸ‘¨â€ğŸ’» å¼€å‘è€…æŒ‡å—](docs/developer-guide.md) - ä»£ç æ¶æ„å’Œå¼€å‘è§„èŒƒ
- [ğŸš€ éƒ¨ç½²æŒ‡å—](docs/deployment-guide.md) - ç¯å¢ƒé…ç½®å’Œéƒ¨ç½²
- [ğŸ”— APIæ–‡æ¡£](docs/api/README.md) - å®Œæ•´çš„APIè¯´æ˜

## ğŸ§ª æµ‹è¯•

è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼š
```bash
npm run test:all
```

è¿è¡Œç‰¹å®šæµ‹è¯•ï¼š
```bash
npm run test:unit        # å•å…ƒæµ‹è¯•
npm run test:integration # é›†æˆæµ‹è¯•
npm run test:auth        # è®¤è¯æµ‹è¯•
npm run test:lottery     # æŠ½å¥–æµ‹è¯•
npm run test:business    # ä¸šåŠ¡æµç¨‹æµ‹è¯•
npm run test:security    # å®‰å…¨æµ‹è¯•
npm run test:performance # æ€§èƒ½æµ‹è¯•
npm run test:bot         # æœºå™¨äººæµ‹è¯•
```

ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šï¼š
```bash
npm run test:coverage
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Prisma** - ç°ä»£åŒ–æ•°æ®åº“ORM
- **Jest** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **ESLint + Prettier** - ä»£ç è´¨é‡å’Œæ ¼å¼åŒ–
- **Redis** - é«˜æ€§èƒ½ç¼“å­˜
- **PM2** - è¿›ç¨‹ç®¡ç†

## ğŸš€ éƒ¨ç½²

è¯¦ç»†çš„éƒ¨ç½²è¯´æ˜è¯·å‚è€ƒ [éƒ¨ç½²æŒ‡å—](docs/deployment-guide.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·é˜…è¯» [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦ç»†çš„è´¡çŒ®æµç¨‹ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®è´Ÿè´£äººï¼š[æ‚¨çš„é‚®ç®±]
- æŠ€æœ¯æ”¯æŒï¼š[æŠ€æœ¯æ”¯æŒé‚®ç®±]
- é—®é¢˜åé¦ˆï¼š[GitHub Issues](repository-url/issues)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼