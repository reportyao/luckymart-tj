# ========================================
# LuckyMart-TJ 环境变量配置模板
# ========================================
# 警告: 这是一个示例文件
# 复制此文件为 .env.local 并填入真实配置值
# 重要: 请勿将包含真实密钥的文件提交到版本控制系统

# ========================================
# Supabase 配置
# ========================================
# 从 Supabase 项目设置中获取
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# ========================================
# 数据库配置
# ========================================
# PostgreSQL 连接字符串
# 格式: postgresql://username:password@host:port/database_name
DATABASE_URL=postgresql://username:password@host:port/database_name

# ========================================
# JWT 密钥配置
# ========================================
# 生成一个复杂的密钥用于 JWT token 签名
JWT_SECRET=your_jwt_secret_key_here

# ========================================
# Telegram Bot 配置
# ========================================
# 从 @BotFather 获取 Bot Token
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# Telegram Mini App URL
MINI_APP_URL=http://localhost:3000

# ========================================
# 支付配置
# ========================================
# Alif Mobi
ALIF_MOBI_PHONE=+992000000000

# DC Bank
DC_BANK_ACCOUNT=TJ00000000000000000000

# ========================================
# 管理员配置
# ========================================
ADMIN_USERNAME=your_admin_username
ADMIN_PASSWORD=your_secure_admin_password

# ========================================
# Redis 缓存配置 (可选)
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_KEY_PREFIX=luckymart:

# ========================================
# 缓存监控配置
# ========================================
CACHE_MONITORING_ENABLED=true
CACHE_MONITORING_INTERVAL=60000

# 缓存告警阈值
CACHE_HIT_RATE_THRESHOLD=80
CACHE_ERROR_RATE_THRESHOLD=5
CACHE_MEMORY_THRESHOLD=512
CACHE_RESPONSE_TIME_THRESHOLD=100

# 告警渠道 (console, email, slack, webhook等)
CACHE_ALERT_CHANNELS=console

# 缓存清理配置
CACHE_PERIODIC_CLEANUP=true
CACHE_CLEANUP_INTERVAL=300000

# 缓存预热配置
CACHE_PRELOADING_ENABLED=true
CACHE_PRELOAD_KEYS=hot_products,app_config,lottery_config,payment_config

# 缓存策略配置
# 可选值: memory_only, redis_only, memory_first, redis_first, write_through, write_back
DEFAULT_CACHE_STRATEGY=memory_first

# 产品缓存TTL (秒)
PRODUCT_CACHE_TTL=600
PRODUCT_HOT_CACHE_TTL=300
PRODUCT_DETAIL_CACHE_TTL=1800

# 用户缓存TTL (秒)
USER_PROFILE_CACHE_TTL=1800
USER_CART_CACHE_TTL=300
USER_ORDERS_CACHE_TTL=600

# 配置缓存TTL (秒)
APP_CONFIG_CACHE_TTL=3600
LOTTERY_CONFIG_CACHE_TTL=3600
PAYMENT_CONFIG_CACHE_TTL=7200

# 统计缓存TTL (秒)
SALES_STATS_CACHE_TTL=300
USER_STATS_CACHE_TTL=600
PRODUCT_STATS_CACHE_TTL=600

# 缓存键最大长度
CACHE_KEY_MAX_LENGTH=250

# 批量操作配置
BATCH_CACHE_SIZE=100
BATCH_CACHE_TIMEOUT=5000

# 连接池配置
REDIS_MAX_RETRIES_PER_REQUEST=3
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# 性能配置
CACHE_RESPONSE_TIME_LOGGING=true
CACHE_OPERATION_LOGGING=true
CACHE_METRICS_RETENTION_HOURS=24

# ========================================
# API基础配置
# ========================================
# 前端API基础URL
# 开发环境: http://localhost:3000
# 生产环境: https://your-production-domain.com
NEXT_PUBLIC_API_BASE_URL=http://localhost:3000

# 测试环境API配置
# 集成测试时使用的API基础URL
TEST_API_BASE_URL=http://localhost:3000

# Bot环境API配置
# Telegram Bot使用的API基础URL
BOT_API_BASE_URL=http://localhost:3000

# WebSocket配置
# 开发环境: ws://localhost:3000/api/ws
# 生产环境: wss://your-production-domain.com/api/ws
NEXT_PUBLIC_WS_URL=ws://localhost:3000/api/ws

# API超时配置
API_TIMEOUT=10000
BOT_TIMEOUT=15000

# 重试配置
RETRY_ATTEMPTS=3
RETRY_DELAY=1000

# ========================================
# 测试环境专用配置
# ========================================
# Jest工作进程ID
JEST_WORKER_ID=1

# 集成测试访问令牌
TEST_ACCESS_TOKEN=test-jwt-token-for-integration-testing

# 测试用户配置
TEST_USER_TELEGRAM_ID=123456789
TEST_ADMIN_USERNAME=test_admin
TEST_ADMIN_PASSWORD=test_admin_123

# ========================================
# 环境配置
# ========================================
# NODE_ENV=development
# NEXT_PUBLIC_ENV=production
# BOT_MODE=false
# JEST_WORKER_ID=